(this["webpackJsonptrade-simulator"]=this["webpackJsonptrade-simulator"]||[]).push([[0],{282:function(e,t,a){e.exports=a(526)},287:function(e,t,a){},289:function(e,t,a){},526:function(e,t,a){"use strict";a.r(t);var s=a(0),l=a.n(s),n=a(65),o=a.n(n);a(287),a(288),a(289);const r="https://trade-simulator-backend.herokuapp.com/";function i(e){if(!e.ok)throw Error(e.statusText);return e.json()}function c(e){return fetch(r+"api/stock/"+e)}function h(e){return fetch(r+"api/batch/"+e)}function m(e,t,a){const s=r+"trades/"+t;let l={method:"POST",headers:{Authorization:a,"Content-Type":"application/JSON","Data-Type":"application/JSON"},body:JSON.stringify({trade:e})};return fetch(s,l)}const u=["1m","3m","6m","ytd","1y","2y"];function p(e,t="6m"){-1===u.indexOf(t.toLowerCase())&&(t="6m");const a=r+"api/chart/".concat(e,"/").concat(t);return fetch(a)}var d=a(547),g=a(527),E=a(548);class y extends s.Component{constructor(...e){super(...e),this.handleItemClick=(e,{name:t})=>this.props.handleMenu(t),this.displayButtons=()=>{const e=this.props.activeItem;let t=l.a.createElement(d.a.Item,{position:"right"},l.a.createElement(g.a,{name:"signup",active:"signup"===e,onClick:this.handleItemClick,color:"green"},"Signup"),l.a.createElement(g.a,{name:"login",active:"login"===e,onClick:this.handleItemClick,style:{marginLeft:"0.5em"},color:"green"},"Login")),a=l.a.createElement(d.a.Item,{position:"right"},"Welcome, ",this.props.userName,l.a.createElement(g.a,{name:"logout",onClick:this.props.handleLogout,style:{marginLeft:"2em"},color:"green"},"Logout"));return this.props.userName?a:t}}render(){const e=this.props.activeItem;return l.a.createElement("div",null,l.a.createElement(E.a,{inverted:!0},l.a.createElement(d.a,{inverted:!0,pointing:!0,secondary:!0},l.a.createElement(d.a.Item,{name:"home",active:"home"===e,onClick:this.handleItemClick}),l.a.createElement(d.a.Item,{name:"portfolio",active:"portfolio"===e,onClick:this.handleItemClick}),l.a.createElement(d.a.Item,{name:"charts",active:"charts"===e,onClick:this.handleItemClick}),l.a.createElement(d.a.Item,{name:"trades",active:"trades"===e,onClick:this.handleItemClick}),this.displayButtons())))}}var S=y,b=a(546),k=a(541);class v extends s.Component{constructor(...e){super(...e),this.generateTables=()=>{const e=(e,t)=>"negative"===e?l.a.createElement(k.a.Cell,{negative:!0},t):"positive"===e?l.a.createElement(k.a.Cell,{positive:!0},t):l.a.createElement(k.a.Cell,null,t);return this.props.stocks.map(t=>{const a=t.symbol,s=t.change,n=t.changePercent,o=t.latestPrice;let r=(100*n).toFixed(2).toString()+"%",i=s<0?"negative":"positive";return 0===s&&(i="none"),l.a.createElement(k.a.Row,{key:Date.now()+a},e(i,a),e(i,s),e(i,r),e(i,o))})}}render(){return l.a.createElement("div",null,l.a.createElement("h3",null,"Trending Stocks"),l.a.createElement(k.a,null,l.a.createElement(k.a.Header,null,l.a.createElement(k.a.Row,null,l.a.createElement(k.a.HeaderCell,null,"Symbol"),l.a.createElement(k.a.HeaderCell,null,"Changed($)"),l.a.createElement(k.a.HeaderCell,null,"Percent"),l.a.createElement(k.a.HeaderCell,null,"Price($)"))),l.a.createElement(k.a.Body,null,this.props.stocks.length>0?this.generateTables():null)))}}var f=v,C=a(542),w=a(59);class T extends s.Component{render(){if(this.props.data){const e=this.props.data.quote,t=e.companyName,a=e.latestPrice,s=e.symbol,n=e.change,o=e.avgTotalVolume,r=e.week52High,i=e.week52Low;let c=n<0?"arrow down":"arrow up",h=n<0?"red":"green";0===n&&(h="black",c="");const m={color:h};return l.a.createElement(C.a,{color:h,fluid:!0},l.a.createElement(C.a.Content,null,l.a.createElement(C.a.Header,{style:m},"$",a,"-",s,"-$",n,l.a.createElement(w.a,{name:c})),l.a.createElement(C.a.Meta,null,l.a.createElement("span",null,"52-Week High:",r," Low:",i)),l.a.createElement(C.a.Description,null,t)),l.a.createElement(C.a.Content,{extra:!0},"Volumn: ",o))}return l.a.createElement("div",null)}}var O=T;class D extends s.Component{render(){return l.a.createElement("div",null,l.a.createElement("h3",null,"Major ETFs"),l.a.createElement(b.a,{columns:2},l.a.createElement(b.a.Row,null,l.a.createElement(b.a.Column,null,l.a.createElement(O,{data:this.props.etfs.IWM})),l.a.createElement(b.a.Column,null,l.a.createElement(O,{data:this.props.etfs.DIA}))),l.a.createElement(b.a.Row,null,l.a.createElement(b.a.Column,null,l.a.createElement(O,{data:this.props.etfs.SPY})),l.a.createElement(b.a.Column,null,l.a.createElement(O,{data:this.props.etfs.QQQ})))))}}var x=D,P=a(55),I=a.n(P),A=a(87),R=a.n(A),B=a(107),N=a(545);const j=({title:e,name:t})=>l.a.createElement(B.a,{content:"".concat(e+":"+t)});class H extends s.Component{constructor(...e){super(...e),this.state={isLoading:!1,results:[],value:""},this.resetComponent=()=>this.setState({isLoading:!1,results:[],value:""}),this.handleResultSelect=(e,{result:t})=>{this.setState({value:t.title}),this.props.setSymbol(t.title)},this.handleSearchChange=(e,{value:t})=>{this.setState({isLoading:!0,value:t.toUpperCase()}),this.props.setSymbol(t),setTimeout(()=>{if(this.state.value.length<1)return this.resetComponent();const e=new RegExp(R.a.escapeRegExp(this.state.value),"i"),t=R.a.filter(this.props.searchData,t=>e.test(t.title)).slice(0,8),a=R.a.filter(this.props.searchData,t=>e.test(t.name)).slice(0,8),s=R.a.filter(this.props.searchData,e=>e.title===this.state.value),l=M([...t,...a]).slice(0,8);this.setState({isLoading:!1,results:M([...s,...l])})},300)}}componentWillMount(){this.resetComponent()}render(){const e=this.state,t=e.isLoading,a=e.value,s=e.results;return l.a.createElement(N.a,{fluid:!0,loading:t,onResultSelect:this.handleResultSelect,onSearchChange:R.a.debounce(this.handleSearchChange,500,{leading:!0}),results:s,value:a,resultRenderer:j,placeholder:"Search Stock Symbol",input:{icon:"search",iconPosition:"left"}})}}function M(e){for(var t=e.concat(),a=0;a<t.length;++a)for(var s=a+1;s<t.length;++s)t[a]===t[s]&&t.splice(s--,1);return t}class L extends s.Component{constructor(...e){super(...e),this.state={symbol:"GOOG",quote:null},this.handleChange=(e,{value:t})=>{this.setState({symbol:t.toUpperCase()},this.getStockPrice)},this.getStockPrice=I()(()=>{c(this.state.symbol).then(i).then(e=>{404!==e.head?this.setState({quote:e}):this.setState({quote:"Not Found"})}).catch(e=>this.setState({quote:"Not Found"}))},300),this.setSymbol=e=>{this.setState({symbol:e},this.getStockPrice)}}componentDidMount(){this.getStockPrice()}render(){if(null!==this.state.quote&&"Not Found"!==this.state.quote)var e=this.state.quote,t=e.week52High,a=e.week52Low,s=e.companyName,n=e.latestPrice,o=e.change,r=e.latestTime;let i=o<0?"arrow down":"arrow up",c=o<0?"red":"green";0===o&&(c="black",i="");const h={color:c};return l.a.createElement(C.a,{fluid:!0,color:c},l.a.createElement(C.a.Content,null,l.a.createElement(C.a.Header,{style:h},l.a.createElement(H,{searchData:this.props.searchData,setSymbol:this.setSymbol}),"Price: $",n," Change: $",o," ",l.a.createElement(w.a,{name:i})),l.a.createElement(C.a.Meta,null,l.a.createElement("span",null," 52-week High:",t," Low:",a)),l.a.createElement(C.a.Description,null,"Company: ",s,",  ",r)))}}var F=L;class q extends s.Component{constructor(...e){super(...e),this.state={focus:[],etfs:[],serverUP:!1},this.getInfo=()=>{fetch("https://trade-simulator-backend.herokuapp.com/api/active").then(i).then(e=>this.setState({focus:e})).catch(e=>console.log("Error:",e)),h(["DIA","SPY","IWM","QQQ"]).then(i).then(e=>this.setState({etfs:e,serverUP:!0})).catch(e=>console.log("Fetch ETFs ERROR!"))}}componentDidMount(){this.getInfo(),this.interval=setInterval(this.getInfo,5e3)}componentWillUnmount(){clearInterval(this.interval)}render(){const e=this.props.userID?this.props.userName:"guest",t=this.props.userID?"Today's snapshot:":"Please sign up or login for full functionalities.",a=this.state.serverUP?null:"Please allow 10s for heroku backend to boot.";return l.a.createElement("div",{className:"home-container"},l.a.createElement("h1",null,"Welcome, ",e,"!"),l.a.createElement("h3",null,t,a),l.a.createElement(b.a,{columns:2,relaxed:!0},l.a.createElement(b.a.Column,null,l.a.createElement(E.a,{basic:!0},l.a.createElement(f,{stocks:this.state.focus}))),l.a.createElement(b.a.Column,null,l.a.createElement("h2",null,"Find Stock:"),l.a.createElement(F,{searchData:this.props.searchData,sytle:{top:"7px"}}),l.a.createElement(x,{etfs:this.state.etfs}))))}}var z=q,U=a(544),W=a(549),_=a(540);class Y extends s.Component{constructor(...e){super(...e),this.state={email:"",password:"",message:null},this.handleSumbit=e=>{e.preventDefault(),console.log(this.state);const t=this.state;(function(e){let t={method:"POST",headers:{"Content-Type":"application/JSON","Data-Type":"application/JSON"},body:JSON.stringify(e)};return fetch("https://trade-simulator-backend.herokuapp.com/sessions",t)})({email:t.email,password:t.password}).then(this.handleErrors).then(e=>{console.log(e),e.token?(localStorage.setItem("token",e.token),this.props.backToHome()):alert(Object.keys(e)+" "+e[Object.keys(e)])}).catch(e=>{this.setState({message:"Email/Password incorrect!"})})},this.handleGuestLogin=e=>{e.preventDefault(),this.setState({email:"guest@guest.com",password:"guest"},()=>this.handleSumbit(e))},this.handleInput=(e,{value:t,name:a})=>{this.setState({[a]:t,message:null})},this.displayMessage=()=>{let e=l.a.createElement(U.a,{color:"red"},this.state.message);return this.state.message?e:null}}componentWillUnmount(){this.setState({email:"",password:"",message:null})}handleErrors(e){if(console.log(e),!e.ok)throw Error(e.statusText);return e.json()}render(){const e=this.state,t=e.email,a=e.password;return l.a.createElement("div",{className:"login-form"},l.a.createElement(b.a,{textAlign:"center",style:{height:"100%"},verticalAlign:"middle"},l.a.createElement(b.a.Column,{style:{maxWidth:450}},l.a.createElement(W.a,{as:"h2",color:"black",textAlign:"center"},"Please Login"),l.a.createElement(_.a,{size:"large"},l.a.createElement(E.a,{stacked:!0},l.a.createElement(_.a.Input,{fluid:!0,icon:"user",value:t,onChange:this.handleInput,iconPosition:"left",placeholder:"E-mail address",name:"email"}),l.a.createElement(_.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",onChange:this.handleInput,name:"password",value:a}),l.a.createElement(g.a,{color:"green",fluid:!0,size:"large",onClick:this.handleSumbit},"Login"),l.a.createElement("br",null),l.a.createElement(g.a,{color:"blue",fluid:!0,size:"large",onClick:this.handleGuestLogin},"Guest Demo Login"))),this.displayMessage())))}}var G=Y;class J extends s.Component{constructor(...e){super(...e),this.state={email:"",username:"",password:"",passwordReenter:"",message:null,valid:!1},this.handleSumbit=e=>{e.preventDefault(),console.log(this.state);const t=this.state;(function(e){let t={method:"POST",headers:{"Content-Type":"application/JSON","Data-Type":"application/JSON"},body:JSON.stringify(e)};return fetch("https://trade-simulator-backend.herokuapp.com/users",t).then(e=>e.json())})({email:t.email,username:t.username,password:t.password}).then(this.handleErrors).then(e=>{console.log(e),e.token?(localStorage.setItem("token",e.token),this.props.backToHome()):alert(Object.keys(e)+" "+e[Object.keys(e)])}).catch(e=>{this.setState({message:"Email has been taken!"})})},this.handleInput=(e,{value:t,name:a})=>{let s=null;this.checkEmail()?s="Email can not be blank!":""===this.state.password?s="Password can not be blank!":this.checkPassword()&&(s="Your password doesn't match!"),this.setState({[a]:t,message:s},this.validate)},this.validate=()=>{""!==this.state.email&&""!==this.state.password&&this.state.password===this.state.passwordReenter?this.setState({valid:!0,message:""}):this.setState({valid:!1})},this.displayMessage=()=>{let e=l.a.createElement(U.a,{color:"red"},this.state.message);return this.state.message?e:null},this.checkPassword=()=>this.state.password!==this.state.passwordReenter,this.checkEmail=()=>""===this.state.email,this.signupButton=()=>this.state.valid?l.a.createElement(g.a,{color:"green",fluid:!0,size:"large",onClick:this.handleSumbit},"Sign Up"):l.a.createElement(g.a,{disabled:!0,color:"green",fluid:!0,size:"large",onClick:this.handleSumbit},"Sign Up")}componentWillUnmount(){this.setState({email:"",username:"",password:"",passwordReenter:"",message:"",valid:!1})}handleErrors(e){if(console.log(e),!e.ok)throw Error(e.statusText);return e}render(){const e=this.state,t=e.email,a=e.username,s=e.password,n=e.passwordReenter;return l.a.createElement("div",{className:"signup-form"},l.a.createElement(b.a,{textAlign:"center",style:{height:"100%"},verticalAlign:"middle"},l.a.createElement(b.a.Column,{style:{maxWidth:450}},l.a.createElement(W.a,{as:"h2",color:"black",textAlign:"center"},"Please Register"),l.a.createElement(_.a,{size:"large"},l.a.createElement(E.a,{stacked:!0},l.a.createElement(_.a.Input,{fluid:!0,icon:"user",name:"email",iconPosition:"left",placeholder:"E-mail address",onChange:this.handleInput,value:t}),l.a.createElement(_.a.Input,{fluid:!0,icon:"user",name:"username",iconPosition:"left",placeholder:"Name",onChange:this.handleInput,value:a}),l.a.createElement(_.a.Input,{fluid:!0,name:"password",icon:"lock",iconPosition:"left",placeholder:"Password",onChange:this.handleInput,type:"password",value:s}),l.a.createElement(_.a.Input,{fluid:!0,name:"passwordReenter",icon:"lock",iconPosition:"left",placeholder:"Reenter Your Password",onChange:this.handleInput,type:"password",value:n}),this.signupButton())),this.displayMessage())))}}var $=J,V=a(550);class Q extends s.Component{constructor(...e){super(...e),this.state={trades:[],meta:{},activePage:1},this.handleErrors=e=>{if(!e.ok)throw Error(e.statusText);return e.json()},this.getTrades=(e=1)=>{(function(e,t,a){return fetch(r+"trades/"+t+"?page="+a,{method:"GET",headers:{Authorization:e,"Content-Type":"application/JSON","Data-Type":"application/JSON"}})})(localStorage.getItem("token"),this.props.userID,e).then(this.handleErrors).then(this.storeData).catch(()=>console.log("ERROR"))},this.storeData=e=>{this.setState({trades:e.trades,meta:e.meta,activePage:e.meta.current_page})},this.generateTables=()=>this.state.trades.map(e=>{let t=e.created_at,a=e.stock_symbol,s=e.quantity,n=e.price,o=e.action,r=new Date(t);return l.a.createElement(k.a.Row,{key:Date.now()+a+s+t},l.a.createElement(k.a.Cell,null,r.toDateString()),l.a.createElement(k.a.Cell,null,a),l.a.createElement(k.a.Cell,null,s),l.a.createElement(k.a.Cell,null,n),l.a.createElement(k.a.Cell,null,o))}),this.handlePageSelect=(e,{activePage:t})=>{this.getTrades(t)},this.topPages=e=>this.state.meta.total_pages&&this.state.meta.total_pages>1?l.a.createElement(V.a,{key:e,onPageChange:this.handlePageSelect,defaultActivePage:this.state.meta.current_page,totalPages:this.state.meta.total_pages}):null}componentDidMount(){this.getTrades()}componentWillUnmount(){this.setState({trades:[],meta:{},activePage:1})}render(){return l.a.createElement("div",{className:"trades-table"},l.a.createElement("h2",null,"Trade History"),this.topPages("top_pagination"),l.a.createElement(k.a,null,l.a.createElement(k.a.Header,null,l.a.createElement(k.a.Row,null,l.a.createElement(k.a.HeaderCell,null,"Date"),l.a.createElement(k.a.HeaderCell,null,"Symbol"),l.a.createElement(k.a.HeaderCell,null,"Shares"),l.a.createElement(k.a.HeaderCell,null,"Price($)"),l.a.createElement(k.a.HeaderCell,null,"Buy/Sell"))),l.a.createElement(k.a.Body,null,this.state.trades.length>0?this.generateTables():null)),this.topPages("down_pagination"))}}var X=Q,K=a(86),Z=a(539);class ee extends s.Component{constructor(...e){super(...e),this.state={symbol:"",quantity:0,message:null,price:null,valid:!1},this.clearState=()=>{this.setState({symbol:"",quantity:0,message:null,price:null,valid:!1})},this.getPeriodicUpdate=()=>{this.state.valid&&""!==this.state.symbol&&this.getStockPrice()},this.getStockPrice=I()(()=>{c(this.state.symbol).then(i).then(e=>{if(404!==e.head){let t="Company: "+e.companyName+" || Current Price: $"+e.latestPrice;this.setState({message:t,price:e.latestPrice,valid:!0})}else this.setState({valid:!1,message:null})}).catch(e=>this.setState({valid:!1,message:null}))},300),this.handleBuySumbit=()=>{let e=this.state.price*this.state.quantity;this.props.validBuy&&e<this.props.balance&&this.state.valid&&this.props.handleBuy(this.state.symbol,this.state.quantity,this.state.price)},this.handleSellSubmit=()=>{this.props.handleSell(this.state.symbol,this.state.quantity,this.state.price)},this.handleSearchInput=e=>{""!==e&&this.getStockPrice(),e=e.toUpperCase(),this.setState({symbol:e},this.validate)},this.handleInput=(e,{value:t,name:a})=>{switch(a){case"symbol":""!==t&&this.getStockPrice(),t=t.toUpperCase();break;case"quantity":t=/[0-9]|\./.test(t)?parseInt(t):""}this.setState({[a]:t},this.validate)},this.validate=()=>{this.props.validateBuy(this.state.symbol,this.state.quantity,this.state.price),this.props.validateSell(this.state.symbol,this.state.quantity)},this.buyButton=()=>this.state.valid&&this.props.validBuy?l.a.createElement(g.a,{positive:!0,onClick:this.handleBuySumbit},"Buy"):l.a.createElement(g.a,{positive:!0,disabled:!0},"Buy"),this.sellButton=()=>this.props.validSell?l.a.createElement(g.a,{negative:!0,onClick:this.handleSellSubmit},"Sell"):l.a.createElement(g.a,{negative:!0,disabled:!0},"Sell"),this.displayMessage=()=>{let e=l.a.createElement(U.a,{color:"red"},"Invalid Stock Symbol");return this.state.valid||""===this.state.symbol?null:e},this.displayQuote=()=>{let e=l.a.createElement(U.a,{color:"green"},this.state.message);return this.state.valid?e:null},this.displayTotal=()=>{let e=this.state.price*this.state.quantity,t=e>this.props.balance?"red":"green",a="red"===t?" Over your budget!":null,s=l.a.createElement(U.a,{color:t},"Total Cost : $",e.toFixed(2)," ",a);return this.state.valid?s:null}}componentDidMount(){this.interval=setInterval(this.getPeriodicUpdate,5e3)}componentWillUnmount(){clearInterval(this.interval),this.clearState()}render(){const e=this.state.quantity,t=this.props.balance?this.props.balance.toFixed(2):0;return l.a.createElement("div",{className:"buy-sell-form"},l.a.createElement(b.a,{textAlign:"center",style:{height:"100%"},verticalAlign:"middle"},l.a.createElement(b.a.Column,{style:{maxWidth:530,height:380}},l.a.createElement(W.a,{as:"h2",color:"black",textAlign:"center"},"Current Cash: $",t),l.a.createElement(_.a,{size:"large"},l.a.createElement(H,{fluid:!0,searchData:this.props.searchData,setSymbol:this.handleSearchInput}),"Number of Shares:",l.a.createElement(_.a.Input,{fluid:!0,icon:"circle",iconPosition:"left",placeholder:"Number of shares",onChange:this.handleInput,name:"quantity",type:"integer",value:e}),l.a.createElement(g.a.Group,{fluid:!0},this.buyButton(),l.a.createElement(g.a.Or,null),this.sellButton())),this.displayMessage(),this.displayQuote(),this.displayTotal())))}}var te=ee;class ae extends s.Component{constructor(...e){super(...e),this.generateTables=()=>{const e=(e,t)=>{switch(e){case"positive":return l.a.createElement(k.a.Cell,{positive:!0},t);case"negative":return l.a.createElement(k.a.Cell,{negative:!0},t);default:return l.a.createElement(k.a.Cell,null,t)}};return this.props.stocks.sort((e,t)=>e.stock_symbol.localeCompare(t.stock_symbol)).map(t=>{let a;a=a?this.props.latestPrice[t.stock_symbol].latestPrice:t.price;let s="";return a>t.openPrice?s="positive":a<t.openPrice&&(s="negative"),l.a.createElement(k.a.Row,{key:Date.now()+t.stock_symbol},e(s,t.stock_symbol),e(s,t.quantity),e(s,t.openPrice),e(s,a),e(s,(t.quantity*a).toFixed(2)))})},this.total=()=>Object.keys(this.props.latestPrice).length>0&&this.props.stocks.length>0?this.props.stocks.reduce((e,t)=>{let a=this.props.latestPrice[t.stock_symbol];return a=a?this.props.latestPrice[t.stock_symbol].price:t.price,e+a*t.quantity},0):0}render(){return l.a.createElement("div",{className:"stock-table"},l.a.createElement("h2",null,"Total Value: $",this.total().toFixed(2)),l.a.createElement(k.a,null,l.a.createElement(k.a.Header,null,l.a.createElement(k.a.Row,null,l.a.createElement(k.a.HeaderCell,null,"Symbol"),l.a.createElement(k.a.HeaderCell,null,"Shares"),l.a.createElement(k.a.HeaderCell,null,"Close($)"),l.a.createElement(k.a.HeaderCell,null,"Current($)"),l.a.createElement(k.a.HeaderCell,null,"Value($)"))),l.a.createElement(k.a.Body,null,this.generateTables())))}}var se=ae,le=a(40),ne=a(167),oe=a(43),re=a(33),ie=a(36),ce=a(141),he=a(7),me=a(126),ue=a(38),pe=a(31);const de=Object(he.createVerticalLinearGradient)([{stop:0,color:Object(he.hexToRGBA)("#b5d0ff",.2)},{stop:.7,color:Object(he.hexToRGBA)("#6fa4fc",.4)},{stop:1,color:Object(he.hexToRGBA)("#4286f4",.8)}]);class ge extends l.a.Component{render(){const e=this.props,t=e.data,a=e.type,s=e.width,n=e.ratio,o=e.symbol,r=new Date(t[t.length-1].date),i=new Date(t[0].date);return l.a.createElement(oe.b,{ratio:n,width:s,height:400,margin:{left:50,right:50,top:10,bottom:30},seriesName:o,data:t,type:a,xAccessor:e=>e.date,xScale:Object(le.scaleTime)(),xExtents:[i,r]},l.a.createElement(oe.a,{id:0,yExtents:e=>e.close},l.a.createElement("defs",null,l.a.createElement("linearGradient",{id:"MyGradient",x1:"0",y1:"100%",x2:"0",y2:"0%"},l.a.createElement("stop",{offset:"0%",stopColor:"#b5d0ff",stopOpacity:.2}),l.a.createElement("stop",{offset:"70%",stopColor:"#6fa4fc",stopOpacity:.4}),l.a.createElement("stop",{offset:"100%",stopColor:"#4286f4",stopOpacity:.8}))),l.a.createElement(ie.XAxis,{axisAt:"bottom",orient:"bottom",ticks:6}),l.a.createElement(ie.YAxis,{axisAt:"left",orient:"left"}),l.a.createElement(pe.MouseCoordinateX,{at:"bottom",orient:"bottom",displayFormat:Object(ue.b)("%Y-%m-%d")}),l.a.createElement(pe.MouseCoordinateY,{at:"left",orient:"left",displayFormat:Object(me.b)(".4s")}),l.a.createElement(re.AreaSeries,{yAccessor:e=>e.close,fill:"url(#MyGradient)",strokeWidth:2,interpolation:ne.a,canvasGradient:de})),l.a.createElement(pe.CrossHairCursor,null))}}ge.defaultProps={type:"svg"};var Ee=ge=Object(ce.fitWidth)(ge);class ye extends s.Component{constructor(...e){super(...e),this.isDataChange=(e,t)=>e.length!==t.length||e.length>0&&t.length>0&&e[0].close!==t[0].close}shouldComponentUpdate(e){return!(e.symbol===this.props.symbol&&!this.isDataChange(e.data,this.props.data))}render(){if(this.props.data.length<1||""===this.props.symbol)return l.a.createElement("div",null);const e=this.props.symbol;return l.a.createElement("div",{className:"small-stock-chart"},l.a.createElement("h3",null,"Stock Symbol:  ",e),l.a.createElement(Ee,{data:this.props.data,symbol:e}))}}var Se=ye;const be=Object(ue.c)("%Y-%m-%d");function ke(e){return e.map(e=>Object(K.a)(Object(K.a)({},e),{},{date:be(e.date)}))}class ve extends s.Component{constructor(e,t){super(e,t),this.isUpdateNeeded=e=>{if(e.stocks.length!==this.props.stocks.length)return!0;let t=!1;return this.props.stocks.forEach((a,s)=>{e.stocks[s].quantity!==a.quantity&&(t=!0)}),t},this.getChartData=I()(e=>{p(e).then(i).then(e=>{let t=ke(e);this.setState({chartData:t})}).catch(e=>{this.setState({chartData:[]}),console.log("invalid symbol")})},3e3),this.getPrice=()=>{this.getOpenPrice()},this.getOpenPrice=()=>{h(this.state.stocks.map(e=>e.stock_symbol)).then(i).then(this.storePriceToState).catch(()=>console.log("fetchBathQuote ERROR!"))},this.storePriceToState=e=>{let t=[],a={};this.state.stocks.forEach(s=>{t.push(Object(K.a)(Object(K.a)({},s),{},{openPrice:e[s.stock_symbol].quote.previousClose,price:e[s.stock_symbol].quote.latestPrice})),a[s.stock_symbol]={price:e[s.stock_symbol].quote.latestPrice}}),this.setState({stocks:t,latestPrice:a})},this.buyStock=(e,t,a)=>{const s=localStorage.getItem("token");m({sym:e,quantity:t,price:a,action:"BUY"},this.props.userID,s).then(i).then(this.props.afterTrade).then(()=>this.validateButtons(e,t,a)).catch(()=>console.log("ERROR!Transaction Failed!")),console.log("buystock")},this.sellStock=(e,t,a)=>{console.log("sell stock",e,t,a);const s=localStorage.getItem("token");m({sym:e,quantity:t,price:a,action:"SELL"},this.props.userID,s).then(i).then(this.props.afterTrade).then(()=>this.validateButtons(e,t,a)).catch(()=>console.log("ERROR!Transaction Failed!"))},this.validateButtons=(e,t,a)=>{this.validateBuy(e,t,a),this.validateSell(e,t)},this.validateBuy=(e,t,a)=>{t>0&&t*a<this.props.balance&&""!==e?this.setState({validBuy:!0,symbol:e}):this.setState({validBuy:!1,symbol:e})},this.validateSell=(e,t)=>{let a=!1;this.state.stocks.forEach(s=>{s.stock_symbol===e&&s.quantity>=t&&t>0&&(a=!0)}),this.setState({validSell:a,symbol:e})},this.state={stocks:[],latestPrice:{},chartData:[],validSell:!1,validBuy:!1,symbol:null}}componentDidMount(){this.setState({stocks:this.props.stocks},this.getPrice),this.interval=setInterval(this.updateLatestPrice,5e4)}componentWillUnmount(){clearInterval(this.interval),this.setState({stocks:[],latestPrice:{},validSell:!1,validBuy:!1})}componentDidUpdate(e,t){this.isUpdateNeeded(e)&&this.setState({stocks:[...this.props.stocks]},this.getPrice),t.symbol!==this.state.symbol&&(""!==this.state.symbol?(console.log(this.state.symbol),this.getChartData(this.state.symbol)):this.setState({chartData:[]}))}render(){return l.a.createElement("div",{className:"portfolio-container"},l.a.createElement(b.a,{columns:2,relaxed:!0},l.a.createElement(b.a.Column,null,l.a.createElement(E.a,{basic:!0},l.a.createElement(se,{stocks:this.state.stocks,latestPrice:this.state.latestPrice}))),l.a.createElement(Z.a,{vertical:!0},"|"),l.a.createElement(b.a.Column,null,l.a.createElement(E.a,{basic:!0},l.a.createElement(te,{handleBuy:this.buyStock,handleSell:this.sellStock,balance:this.props.balance,selected:null,validBuy:this.state.validBuy,validateBuy:this.validateBuy,validSell:this.state.validSell,validateSell:this.validateSell,searchData:this.props.searchData})),l.a.createElement(Se,{symbol:this.state.symbol,data:this.state.chartData}))))}}var fe=ve,Ce=a(266),we=a(88),Te=a(89);const Oe={stroke:Object.assign({},re.StochasticSeries.defaultProps.stroke)};class De extends l.a.Component{render(){const e=this.props,t=e.type,a=e.data,s=e.width,n=e.ratio,o={left:70,right:70,top:20,bottom:30},r={innerTickSize:-1*(s-o.left-o.right),tickStrokeOpacity:.1},i={innerTickSize:-1*(750-o.top-o.bottom),tickStrokeOpacity:.1},c=Object(Te.ema)().id(0).options({windowSize:20}).merge((e,t)=>{e.ema20=t}).accessor(e=>e.ema20),h=Object(Te.ema)().id(2).options({windowSize:50}).merge((e,t)=>{e.ema50=t}).accessor(e=>e.ema50),m=Object(Te.stochasticOscillator)().options({windowSize:14,kWindowSize:3}).merge((e,t)=>{e.slowSTO=t}).accessor(e=>e.slowSTO),u=Object(Te.stochasticOscillator)().options({windowSize:14,kWindowSize:1}).merge((e,t)=>{e.fastSTO=t}).accessor(e=>e.fastSTO),p=Object(Te.stochasticOscillator)().options({windowSize:14,kWindowSize:3,dWindowSize:4}).merge((e,t)=>{e.fullSTO=t}).accessor(e=>e.fullSTO),d=c(h(m(u(p(a))))),g=Ce.discontinuousTimeScaleProvider.inputDateAccessor(e=>e.date)(d),E=g.data,y=g.xScale,S=g.xAccessor,b=g.displayXAccessor,k=[S(Object(he.last)(E)),S(E[Math.max(0,E.length-150)])];return l.a.createElement(oe.b,{height:750,width:s,ratio:n,margin:o,type:t,seriesName:"MSFT",data:E,xScale:y,xAccessor:S,displayXAccessor:b,xExtents:k},l.a.createElement(oe.a,{id:1,height:325,yExtents:e=>[e.high,e.low],padding:{top:10,bottom:20}},l.a.createElement(ie.YAxis,Object.assign({axisAt:"right",orient:"right",ticks:5},r)),l.a.createElement(ie.XAxis,{axisAt:"bottom",orient:"bottom",showTicks:!1,outerTickSize:0}),l.a.createElement(pe.MouseCoordinateY,{at:"right",orient:"right",displayFormat:Object(me.b)(".2f")}),l.a.createElement(re.CandlestickSeries,null),l.a.createElement(re.LineSeries,{yAccessor:c.accessor(),stroke:c.stroke()}),l.a.createElement(re.LineSeries,{yAccessor:h.accessor(),stroke:h.stroke()}),l.a.createElement(pe.CurrentCoordinate,{yAccessor:c.accessor(),fill:c.stroke()}),l.a.createElement(pe.CurrentCoordinate,{yAccessor:h.accessor(),fill:h.stroke()}),l.a.createElement(pe.EdgeIndicator,{itemType:"last",orient:"right",edgeAt:"right",yAccessor:e=>e.close,fill:e=>e.close>e.open?"#6BA583":"#FF0000"}),l.a.createElement(re.StraightLine,{type:"vertical",xValue:608}),";",l.a.createElement(re.StraightLine,{type:"vertical",xValue:558,strokeDasharray:"Dot"}),";",l.a.createElement(re.StraightLine,{type:"vertical",xValue:578,strokeDasharray:"LongDash"}),";",l.a.createElement(we.OHLCTooltip,{origin:[-40,-10]}),l.a.createElement(we.MovingAverageTooltip,{onClick:e=>console.log(e),origin:[-38,5],options:[{yAccessor:c.accessor(),type:c.type(),stroke:c.stroke(),windowSize:c.options().windowSize},{yAccessor:h.accessor(),type:h.type(),stroke:h.stroke(),windowSize:h.options().windowSize}]})),l.a.createElement(oe.a,{id:2,yExtents:e=>e.volume,height:100,origin:(e,t)=>[0,t-475]},l.a.createElement(ie.YAxis,{axisAt:"left",orient:"left",ticks:5,tickFormat:Object(me.b)(".2s")}),l.a.createElement(pe.MouseCoordinateY,{at:"left",orient:"left",displayFormat:Object(me.b)(".4s")}),l.a.createElement(re.BarSeries,{yAccessor:e=>e.volume,fill:e=>e.close>e.open?"#6BA583":"#FF0000"})),l.a.createElement(oe.a,{id:3,yExtents:[0,100],height:125,origin:(e,t)=>[0,t-375],padding:{top:10,bottom:10}},l.a.createElement(ie.XAxis,{axisAt:"bottom",orient:"bottom",showTicks:!1,outerTickSize:0}),l.a.createElement(ie.YAxis,{axisAt:"right",orient:"right",tickValues:[20,50,80]}),l.a.createElement(pe.MouseCoordinateY,{at:"right",orient:"right",displayFormat:Object(me.b)(".2f")}),l.a.createElement(re.StochasticSeries,Object.assign({yAccessor:e=>e.fastSTO},Oe)),l.a.createElement(we.StochasticTooltip,{origin:[-38,15],yAccessor:e=>e.slowSTO,options:m.options(),appearance:Oe,label:"Slow STO"})),l.a.createElement(oe.a,{id:4,yExtents:[0,100],height:125,origin:(e,t)=>[0,t-250],padding:{top:10,bottom:10}},l.a.createElement(ie.XAxis,{axisAt:"bottom",orient:"bottom",showTicks:!1,outerTickSize:0}),l.a.createElement(ie.YAxis,{axisAt:"right",orient:"right",tickValues:[20,50,80]}),l.a.createElement(pe.MouseCoordinateY,{at:"right",orient:"right",displayFormat:Object(me.b)(".2f")}),l.a.createElement(re.StochasticSeries,Object.assign({yAccessor:e=>e.slowSTO},Oe)),l.a.createElement(we.StochasticTooltip,{origin:[-38,15],yAccessor:e=>e.fastSTO,options:u.options(),appearance:Oe,label:"Fast STO"})),l.a.createElement(oe.a,{id:5,yExtents:[0,100],height:125,origin:(e,t)=>[0,t-125],padding:{top:10,bottom:10}},l.a.createElement(ie.XAxis,Object.assign({axisAt:"bottom",orient:"bottom"},i)),l.a.createElement(ie.YAxis,{axisAt:"right",orient:"right",tickValues:[20,50,80]}),l.a.createElement(pe.MouseCoordinateX,{at:"bottom",orient:"bottom",displayFormat:Object(ue.b)("%Y-%m-%d")}),l.a.createElement(pe.MouseCoordinateY,{at:"right",orient:"right",displayFormat:Object(me.b)(".2f")}),l.a.createElement(re.StochasticSeries,Object.assign({yAccessor:e=>e.fullSTO},Oe)),l.a.createElement(we.StochasticTooltip,{origin:[-38,15],yAccessor:e=>e.fullSTO,options:p.options(),appearance:Oe,label:"Full STO"})),l.a.createElement(pe.CrossHairCursor,null))}}De.defaultProps={type:"svg"};var xe=De=Object(ce.fitWidth)(De),Pe=a(267);class Ie extends s.Component{constructor(...e){super(...e),this.handleClick=(e,{name:t})=>{this.props.selectRange(t)},this.generateButton=()=>u.map(e=>l.a.createElement(g.a,{key:Object(Pe.v4)(),onClick:this.handleClick,name:e},e.toUpperCase()))}render(){return l.a.createElement("div",null,l.a.createElement(g.a.Group,null,this.generateButton()))}}var Ae=Ie;class Re extends s.Component{constructor(...e){super(...e),this.state={chartData:[],range:"6m",symbol:"aapl"},this.selectRange=e=>{console.log("range",e),this.setState({range:e},()=>this.getChartData(this.state.symbol,e))},this.setSymbol=e=>{this.setState({symbol:e},()=>this.getChartData(this.state.symbol))},this.getChartData=I()((e,t="6m")=>{p(e,t).then(i).then(e=>{let t=ke(e);this.setState({chartData:t})}).catch(e=>{this.setState({chartData:[]}),console.log("invalid symbol")})},500)}componentDidMount(){this.getChartData(this.state.symbol)}render(){return l.a.createElement("div",null,l.a.createElement(H,{setSymbol:this.setSymbol,searchData:this.props.searchData}),this.state.chartData.length>0?l.a.createElement("div",null,l.a.createElement(Ae,{selectRange:this.selectRange}),l.a.createElement(xe,{data:this.state.chartData})):null)}}var Be=Re;class Ne extends s.Component{constructor(...e){super(...e),this.state={activeItem:"home",userID:null,userEmail:null,userName:null,stocks:[],balance:null,searchData:[]},this.clearState=()=>{this.setState({activeItem:"home",userID:null,userEmail:null,userName:null,stocks:[],balance:null})},this.getAllSymbols=()=>{fetch("https://api.iextrading.com/1.0/ref-data/symbols").then(i).then(e=>this.setState({searchData:e.map(this.parseSymbols)})).catch(()=>console.log("FETCH SYMBOLS ERROR!!!"))},this.parseSymbols=e=>({title:e.symbol,name:e.name}),this.afterTrade=e=>{const t={id:this.state.userID,email:this.state.userEmail};this.saveDataToState(e,t)},this.checkToken=()=>{let e=localStorage.getItem("token");e?this.parseToken(e):this.clearState()},this.saveDataToState=(e,t)=>{this.setState({userID:t.id,userEmail:t.email,userName:e.user.charAt(0).toUpperCase()+e.user.slice(1),stocks:e.stocks,balance:e.balance},()=>console.log())},this.parseToken=e=>{let t=JSON.parse(atob(e.split(".")[1]));(function(e,t){return fetch(r+"users/"+t,{method:"GET",headers:{Authorization:e,"Content-Type":"application/JSON","Data-Type":"application/JSON"}})})(e,t.id).then(i).then(e=>this.saveDataToState(e,t)).catch(e=>console.log("TOKEN ERROR! CANT FETCH USER INFO!")),console.log()},this.handleBackHome=()=>{this.setState({activeItem:"home"},()=>this.checkToken())},this.handleLogout=()=>{localStorage.removeItem("token"),this.checkToken()},this.handleMenu=e=>this.setState({activeItem:e}),this.displayContent=()=>{switch(this.state.activeItem){case"home":return l.a.createElement(z,{userID:this.state.userID,userName:this.state.userName,searchData:this.state.searchData});case"portfolio":return this.state.userID?l.a.createElement(fe,{balance:this.state.balance,userID:this.state.userID,stocks:this.state.stocks,searchData:this.state.searchData,afterTrade:this.afterTrade}):l.a.createElement(z,null);case"charts":return this.state.userID?l.a.createElement(Be,{searchData:this.state.searchData}):l.a.createElement(z,null);case"trades":return this.state.userID?l.a.createElement(X,{userID:this.state.userID}):l.a.createElement(z,null);case"login":return l.a.createElement(G,{backToHome:this.handleBackHome});case"signup":return l.a.createElement($,{backToHome:this.handleBackHome});default:return l.a.createElement(z,null)}}}componentDidMount(){this.checkToken(),this.getAllSymbols()}componentWillUnmount(){this.clearState()}render(){return l.a.createElement("div",null,l.a.createElement(S,{handleMenu:this.handleMenu,activeItem:this.state.activeItem,userName:this.state.userName,handleLogout:this.handleLogout}),this.displayContent())}}var je=Ne;class He extends s.Component{render(){const e=window.innerHeight;return l.a.createElement("div",{className:"App",style:{height:e}},l.a.createElement(je,null))}}var Me=He;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(Me,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[282,1,2]]]);
//# sourceMappingURL=main.80a4b5d6.chunk.js.map